{% extends "base.html" %}

{% block content %}
  <h1>הגדרות מערכת</h1>
  
  <hr>

  <h2>ניהול סוגי רישום</h2>
  <div style="border: 1px solid #ccc; padding: 15px; margin-bottom: 20px;">
    <h3>הוסף סוג רישום חדש (לדוגמה: ליד, לקוח, מתעניין)</h3>
    <form action="{{ url_for('add_contact_type') }}" method="post">
      <input type="text" name="name" placeholder="שם הסוג" required>
      <button type="submit">הוסף סוג</button>
    </form>
  </div>
<hr>

  <h2>ניהול סוגי התקשרות</h2>
  <div style="border: 1px solid #28a745; padding: 15px; margin-bottom: 20px;">
    <h3>הוסף סוג התקשרות חדש (לדוגמה: שיחת טלפון, מייל נכנס, פגישה)</h3>
    <form action="{{ url_for('add_activity_type') }}" method="post">
      <input type="text" name="name" placeholder="שם הסוג" required>
      <button type="submit">הוסף סוג התקשרות</button>
    </form>
    
    <h4>סוגים קיימים:</h4>
    <ul>
      {% for a_type in activity_types %}
        <li>{{ a_type.name }}</li>
      {% else %}
        <li>אין עדיין סוגי התקשרות מוגדרים.</li>
      {% endfor %}
    </ul>
  </div>
  {% for c_type in contact_types %}
    <div style="border: 1px solid #007bff; padding: 15px; margin-bottom: 20px;">
      <h3>סוג: {{ c_type.name }}</h3>
      
      <h4>סטטוסים קיימים:</h4>
      <ul>
        {% for status in c_type.statuses %}
          <li>{{ status.name }}</li>
        {% else %}
          <li>אין עדיין סטטוסים לסוג זה.</li>
        {% endfor %}
      </ul>
      
      <h4>הוסף סטטוס חדש לסוג '{{ c_type.name }}'</h4>
      <form action="{{ url_for('add_status') }}" method="post">
        <input type="hidden" name="contact_type_id" value="{{ c_type.id }}">
        <input type="text" name="name" placeholder="שם הסטטוס" required>
        <button type="submit">הוסף סטטוס</button>
      </form>
    </div>
  {% endfor %}

{% endblock %}